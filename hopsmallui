local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local WEBHOOK_URL = "https://discord.com/api/webhooks/1425902530012905566/4680xvhQ5RF7STymyHMiItM9h6Wt6FIZ41zExZdUnLZ4jqOyCgYIKDaBGcpEUR2CmJPl"

local BOSS_PATHS = {
    "Stone [Lv. 1550] [Boss]",
    "Hydra Leader [Lv. 1675] [Boss]",
    "Kilo Admiral [Lv. 1750] [Boss]",
    "Captain Elephant [Lv. 1875] [Boss]",
    "Beautiful Pirate [Lv. 1950] [Boss]"
}

local notifiedBosses = {} 

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ServerHopperGui"
screenGui.Parent = playerGui
screenGui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 200, 0, 80)
mainFrame.Position = UDim2.new(0.5, -100, 0, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = mainFrame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 22)
title.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
title.BorderSizePixel = 0
title.Text = "üåä Elite Hopper"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextSize = 11
title.Font = Enum.Font.GothamBold
title.Parent = mainFrame

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 8)
titleCorner.Parent = title

local jobIdInput = Instance.new("TextBox")
jobIdInput.Size = UDim2.new(0, 120, 0, 20)
jobIdInput.Position = UDim2.new(0, 5, 0, 27)
jobIdInput.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
jobIdInput.BorderSizePixel = 0
jobIdInput.Text = ""
jobIdInput.PlaceholderText = "Job ID..."
jobIdInput.TextColor3 = Color3.fromRGB(255, 255, 255)
jobIdInput.TextSize = 10
jobIdInput.Font = Enum.Font.Gotham
jobIdInput.Parent = mainFrame

local inputCorner = Instance.new("UICorner")
inputCorner.CornerRadius = UDim.new(0, 4)
inputCorner.Parent = jobIdInput

local copyBtn = Instance.new("TextButton")
copyBtn.Size = UDim2.new(0, 30, 0, 20)
copyBtn.Position = UDim2.new(0, 130, 0, 27)
copyBtn.BackgroundColor3 = Color3.fromRGB(0, 162, 255)
copyBtn.BorderSizePixel = 0
copyBtn.Text = "üìã"
copyBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
copyBtn.TextSize = 12
copyBtn.Font = Enum.Font.GothamBold
copyBtn.Parent = mainFrame

local copyCorner = Instance.new("UICorner")
copyCorner.CornerRadius = UDim.new(0, 4)
copyCorner.Parent = copyBtn

local clearBtn = Instance.new("TextButton")
clearBtn.Size = UDim2.new(0, 30, 0, 20)
clearBtn.Position = UDim2.new(0, 165, 0, 27)
clearBtn.BackgroundColor3 = Color3.fromRGB(255, 69, 0)
clearBtn.BorderSizePixel = 0
clearBtn.Text = "‚úï"
clearBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
clearBtn.TextSize = 12
clearBtn.Font = Enum.Font.GothamBold
clearBtn.Parent = mainFrame

local clearCorner = Instance.new("UICorner")
clearCorner.CornerRadius = UDim.new(0, 4)
clearCorner.Parent = clearBtn

local hopBtn = Instance.new("TextButton")
hopBtn.Size = UDim2.new(0, 95, 0, 24)
hopBtn.Position = UDim2.new(0, 5, 0, 52)
hopBtn.BackgroundColor3 = Color3.fromRGB(0, 255, 127)
hopBtn.BorderSizePixel = 0
hopBtn.Text = "üöÄ HOP"
hopBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
hopBtn.TextSize = 11
hopBtn.Font = Enum.Font.GothamBold
hopBtn.Parent = mainFrame

local hopCorner = Instance.new("UICorner")
hopCorner.CornerRadius = UDim.new(0, 4)
hopCorner.Parent = hopBtn

local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(0, 90, 0, 24)
statusLabel.Position = UDim2.new(0, 105, 0, 52)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "Ready"
statusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
statusLabel.TextSize = 9
statusLabel.Font = Enum.Font.Gotham
statusLabel.Parent = mainFrame

local function sendWebhook(bossName, jobId, playerCount)
    local data = {
        ["embeds"] = {{
            ["title"] = "Common Boss Spawned!",
            ["description"] = "**Boss:** " .. bossName .. "\n**Players:** " .. playerCount .. "/12",
            ["color"] = 15158332,
            ["fields"] = {{
                ["name"] = "Job ID",
                ["value"] = "```" .. jobId .. "```",
                ["inline"] = false
            }},
            ["timestamp"] = os.date("!%Y-%m-%dT%H:%M:%S"),
            ["footer"] = {
                ["text"] = "Elite Boss Tracker"
            }
        }}
    }
    
    local success, err = pcall(function()
        request({
            Url = WEBHOOK_URL,
            Method = "POST",
            Headers = {
                ["Content-Type"] = "application/json"
            },
            Body = HttpService:JSONEncode(data)
        }, false)
    end)
    
    if success then
        print("‚úÖ ƒê√£ g·ª≠i th√¥ng b√°o cho boss:", bossName)
    else
        warn("‚ùå L·ªói g·ª≠i webhook:", err)
    end
end

local function checkBoss(bossName)
    local currentJobId = game.JobId
    local playerCount = #Players:GetPlayers()
    
    if not notifiedBosses[bossName] then
        print("üéØ Boss detected:", bossName)
        sendWebhook(bossName, currentJobId, playerCount)
        notifiedBosses[bossName] = true
    end
end

spawn(function()
    print("wait 10s")
    wait(10)
    print("done ")
    
    local enemySpawns = game:GetService("Workspace")._WorldOrigin.EnemySpawns
    
    for i = 1, 3 do
        for _, bossName in pairs(BOSS_PATHS) do
            local bossPath = enemySpawns:FindFirstChild(bossName)
            if bossPath then
                checkBoss(bossName)
            end
        end
        wait(2)
    end
    
    print("üîÑ Chuy·ªÉn sang ch·∫ø ƒë·ªô event listener...")
    
    enemySpawns.ChildAdded:Connect(function(child)
        for _, bossName in pairs(BOSS_PATHS) do
            if child.Name == bossName then
                wait(0.5) -- ƒê·ª£i m·ªôt ch√∫t ƒë·ªÉ ƒë·∫£m b·∫£o boss ƒë√£ spawn ho√†n to√†n
                checkBoss(bossName)
                break
            end
        end
    end)
    
    enemySpawns.ChildRemoved:Connect(function(child)
        for _, bossName in pairs(BOSS_PATHS) do
            if child.Name == bossName then
                if notifiedBosses[bossName] then
                    notifiedBosses[bossName] = nil
                    print("üîÑ Boss ƒë√£ despawn:", bossName)
                end
                break
            end
        end
    end)
end)
