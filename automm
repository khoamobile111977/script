local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/jensonhirst/Orion/main/source')))()
local Window = OrionLib:MakeWindow({Name = "Blox Fruits Boss Farm", HidePremium = false, IntroText = "Boss Farm Script"})

local FarmTab = Window:MakeTab({
    Name = "Farming",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local FarmSection = FarmTab:AddSection({
    Name = "Boss Farming"
})

-- Variables
local farmEnabled = false
local fastAttackEnabled = false
local bringMobEnabled = false
local hoverHeight = 30
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local rootPart = character:WaitForChild("HumanoidRootPart")

-- Function to find boss
local function findBoss()
    for _, v in pairs(workspace.Enemies:GetChildren()) do
        if v:IsA("Model") and v:FindFirstChild("HumanoidRootPart") and v:FindFirstChild("Humanoid") then
            if v.Name:match("Captain Elephant") then
                return v
            end
        end
    end
    return nil
end

-- Function to disable player movement
local function disableCharacterMovement()
    local humanoid = character:FindFirstChild("Humanoid")
    if humanoid then
        humanoid.WalkSpeed = 0
        humanoid.JumpPower = 0
    end
end

-- Function to restore player movement
local function restoreCharacterMovement()
    local humanoid = character:FindFirstChild("Humanoid")
    if humanoid then
        humanoid.WalkSpeed = 16
        humanoid.JumpPower = 50
    end
end

-- Function for Auto Farm
local function farmBoss()
    while farmEnabled do
        local boss = findBoss()
        if boss then
            local bossRoot = boss:FindFirstChild("HumanoidRootPart")
            if bossRoot then
                disableCharacterMovement()

                -- Keep character above the boss
                spawn(function()
                    while farmEnabled and boss and boss:FindFirstChild("Humanoid") and boss.Humanoid.Health > 0 do
                        rootPart.CFrame = bossRoot.CFrame * CFrame.new(0, hoverHeight, 0)
                        wait(0.1)
                    end
                end)

                -- Attack loop
                while farmEnabled and boss and boss:FindFirstChild("Humanoid") and boss.Humanoid.Health > 0 do
                    if fastAttackEnabled then
                        -- Add your attack function here
                    end
                    if bringMobEnabled then
                        -- Add your bring mob function here
                    end
                    wait(0.1)
                end

                -- Restore movement after boss is defeated
                restoreCharacterMovement()
            end
        end
        wait(1) -- Prevent excessive loop execution
    end
end

-- UI Elements
FarmSection:AddToggle({
    Name = "Enable Boss Farm",
    Default = false,
    Callback = function(value)
        farmEnabled = value
        if farmEnabled then
            farmBoss()
        end
    end
})

FarmSection:AddToggle({
    Name = "Enable Fast Attack",
    Default = false,
    Callback = function(value)
        fastAttackEnabled = value
    end
})

FarmSection:AddToggle({
    Name = "Enable Bring Mob",
    Default = false,
    Callback = function(value)
        bringMobEnabled = value
    end
})

FarmSection:AddSlider({
    Name = "Hover Height",
    Min = 10,
    Max = 100,
    Default = 30,
    Callback = function(value)
        hoverHeight = value
    end
})

-- Notification when script is fully loaded
OrionLib:MakeNotification({
    Name = "Script Loaded",
    Content = "Boss Farm - Captain Elephant is ready!",
    Image = "rbxassetid://4483345998",
    Time = 5
})

OrionLib:Init()
